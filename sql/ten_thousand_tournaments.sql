-- MySQL Script generated by MySQL Workbench
-- 11/19/14 01:59:36
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema ten_thousand_tournaments
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema ten_thousand_tournaments
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `ten_thousand_tournaments` DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ;
USE `ten_thousand_tournaments` ;

-- -----------------------------------------------------
-- Table `ten_thousand_tournaments`.`locations`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ten_thousand_tournaments`.`locations` ;

CREATE TABLE IF NOT EXISTS `ten_thousand_tournaments`.`locations` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL,
  `address` VARCHAR(45) NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ten_thousand_tournaments`.`users`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ten_thousand_tournaments`.`users` ;

CREATE TABLE IF NOT EXISTS `ten_thousand_tournaments`.`users` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `first_name` VARCHAR(45) NULL,
  `last_name` VARCHAR(45) NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ten_thousand_tournaments`.`positions`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ten_thousand_tournaments`.`positions` ;

CREATE TABLE IF NOT EXISTS `ten_thousand_tournaments`.`positions` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ten_thousand_tournaments`.`players`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ten_thousand_tournaments`.`players` ;

CREATE TABLE IF NOT EXISTS `ten_thousand_tournaments`.`players` (
  `id` INT UNSIGNED NOT NULL,
  `jersey_number` VARCHAR(3) NULL,
  `position` INT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_players_positions_idx` (`position` ASC),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC),
  CONSTRAINT `fk_players_users`
    FOREIGN KEY (`id`)
    REFERENCES `ten_thousand_tournaments`.`users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_players_positions`
    FOREIGN KEY (`position`)
    REFERENCES `ten_thousand_tournaments`.`positions` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ten_thousand_tournaments`.`teams`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ten_thousand_tournaments`.`teams` ;

CREATE TABLE IF NOT EXISTS `ten_thousand_tournaments`.`teams` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL,
  `date_registered` DATETIME NULL,
  `rep_player_id` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_teams_players_idx` (`rep_player_id` ASC),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC),
  CONSTRAINT `fk_teams_players`
    FOREIGN KEY (`rep_player_id`)
    REFERENCES `ten_thousand_tournaments`.`players` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ten_thousand_tournaments`.`divisions`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ten_thousand_tournaments`.`divisions` ;

CREATE TABLE IF NOT EXISTS `ten_thousand_tournaments`.`divisions` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL,
  `rank` INT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ten_thousand_tournaments`.`game_states`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ten_thousand_tournaments`.`game_states` ;

CREATE TABLE IF NOT EXISTS `ten_thousand_tournaments`.`game_states` (
  `id` INT UNSIGNED NOT NULL,
  `name` VARCHAR(45) NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ten_thousand_tournaments`.`games`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ten_thousand_tournaments`.`games` ;

CREATE TABLE IF NOT EXISTS `ten_thousand_tournaments`.`games` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `home_team_id` INT UNSIGNED NULL,
  `away_team_id` INT UNSIGNED NULL,
  `date_time` DATETIME NOT NULL,
  `division_id` INT UNSIGNED NOT NULL,
  `game_state_id` INT UNSIGNED NULL,
  `home_score` INT NULL,
  `away_score` INT NULL,
  `location_id` INT UNSIGNED NOT NULL,
  `season_id` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_games_locations_idx` (`location_id` ASC),
  INDEX `fk_games_teams_home_idx` (`home_team_id` ASC),
  INDEX `fk_games_teams_away_idx` (`away_team_id` ASC),
  INDEX `fk_games_divisions_idx` (`division_id` ASC),
  INDEX `fk_games_game_states_idx` (`game_state_id` ASC),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC),
  CONSTRAINT `fk_games_locations`
    FOREIGN KEY (`location_id`)
    REFERENCES `ten_thousand_tournaments`.`locations` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_games_teams_home`
    FOREIGN KEY (`home_team_id`)
    REFERENCES `ten_thousand_tournaments`.`teams` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_games_teams_away`
    FOREIGN KEY (`away_team_id`)
    REFERENCES `ten_thousand_tournaments`.`teams` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_games_divisions`
    FOREIGN KEY (`division_id`)
    REFERENCES `ten_thousand_tournaments`.`divisions` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_games_game_states`
    FOREIGN KEY (`game_state_id`)
    REFERENCES `ten_thousand_tournaments`.`game_states` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ten_thousand_tournaments`.`groups`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ten_thousand_tournaments`.`groups` ;

CREATE TABLE IF NOT EXISTS `ten_thousand_tournaments`.`groups` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ten_thousand_tournaments`.`sports`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ten_thousand_tournaments`.`sports` ;

CREATE TABLE IF NOT EXISTS `ten_thousand_tournaments`.`sports` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ten_thousand_tournaments`.`leagues`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ten_thousand_tournaments`.`leagues` ;

CREATE TABLE IF NOT EXISTS `ten_thousand_tournaments`.`leagues` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL,
  `sport_id` INT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_leagues_sport_idx` (`sport_id` ASC),
  CONSTRAINT `fk_leagues_sport`
    FOREIGN KEY (`sport_id`)
    REFERENCES `ten_thousand_tournaments`.`sports` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ten_thousand_tournaments`.`seasons`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ten_thousand_tournaments`.`seasons` ;

CREATE TABLE IF NOT EXISTS `ten_thousand_tournaments`.`seasons` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `year` INT NULL,
  `league_id` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_seasons_leagues1_idx` (`league_id` ASC),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC),
  CONSTRAINT `fk_seasons_leagues1`
    FOREIGN KEY (`league_id`)
    REFERENCES `ten_thousand_tournaments`.`leagues` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ten_thousand_tournaments`.`divisions_players_seasons_teams`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ten_thousand_tournaments`.`divisions_players_seasons_teams` ;

CREATE TABLE IF NOT EXISTS `ten_thousand_tournaments`.`divisions_players_seasons_teams` (
  `player_id` INT UNSIGNED NOT NULL,
  `team_id` INT UNSIGNED NOT NULL,
  `division_id` INT UNSIGNED NOT NULL,
  `season_id` INT UNSIGNED NOT NULL,
  INDEX `fk_divisions_players_seasons_teams_teams_idx` (`team_id` ASC),
  INDEX `fk_divisions_players_seasons_teams_divisions_idx` (`division_id` ASC),
  INDEX `fk_divisions_players_seasons_teams_seasons_idx` (`season_id` ASC),
  INDEX `fk_divisions_players_seasons_teams_players_idx` (`player_id` ASC),
  PRIMARY KEY (`player_id`, `team_id`, `division_id`, `season_id`),
  CONSTRAINT `fk_player_team_division_season_teams`
    FOREIGN KEY (`team_id`)
    REFERENCES `ten_thousand_tournaments`.`teams` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_player_team_division_season_divisions`
    FOREIGN KEY (`division_id`)
    REFERENCES `ten_thousand_tournaments`.`divisions` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_player_team_division_season_season`
    FOREIGN KEY (`season_id`)
    REFERENCES `ten_thousand_tournaments`.`seasons` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_player_team_division_season_players`
    FOREIGN KEY (`player_id`)
    REFERENCES `ten_thousand_tournaments`.`players` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ten_thousand_tournaments`.`admins`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ten_thousand_tournaments`.`admins` ;

CREATE TABLE IF NOT EXISTS `ten_thousand_tournaments`.`admins` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC),
  CONSTRAINT `fk_administrators_users`
    FOREIGN KEY (`id`)
    REFERENCES `ten_thousand_tournaments`.`users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ten_thousand_tournaments`.`groups_leagues_users`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ten_thousand_tournaments`.`groups_leagues_users` ;

CREATE TABLE IF NOT EXISTS `ten_thousand_tournaments`.`groups_leagues_users` (
  `group_id` INT UNSIGNED NOT NULL,
  `league_id` INT UNSIGNED NOT NULL,
  `user_id` INT UNSIGNED NOT NULL,
  INDEX `fk_admins_groups_leagues_leagues_idx` (`league_id` ASC),
  PRIMARY KEY (`group_id`, `league_id`, `user_id`),
  INDEX `fk_groups_leagues_users_users_idx` (`user_id` ASC),
  INDEX `fk_groups_leagues_users_groups_idx` (`group_id` ASC),
  CONSTRAINT `fk_admins_groups_leagues_leagues`
    FOREIGN KEY (`league_id`)
    REFERENCES `ten_thousand_tournaments`.`leagues` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_admins_groups_leagues_groups`
    FOREIGN KEY (`group_id`)
    REFERENCES `ten_thousand_tournaments`.`groups` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_groups_leagues_users_users1`
    FOREIGN KEY (`user_id`)
    REFERENCES `ten_thousand_tournaments`.`users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ten_thousand_tournaments`.`referees`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ten_thousand_tournaments`.`referees` ;

CREATE TABLE IF NOT EXISTS `ten_thousand_tournaments`.`referees` (
  `id` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `id_UNIQUE` (`id` ASC),
  CONSTRAINT `fk_referees_users1`
    FOREIGN KEY (`id`)
    REFERENCES `ten_thousand_tournaments`.`users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
